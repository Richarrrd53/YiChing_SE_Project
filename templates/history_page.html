<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>歷史委託紀錄</title>
    <link rel="stylesheet" href="/css/style.css"> <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
		<h3>登入身分：{{ username }} <span class="status-pill role-{{role}}">{{role}}</span></h3>
        {% if role == 'client' %}
            <h1>{{ username }}的歷史委託紀錄</h1>
            <nav class="nav">
                <a href='/'>我的專案</a>
                <a href='/page/create-project'>新增委託</a>
                <a href='/page/history'>歷史委託紀錄</a>
                <a href='/logout'>登出</a>
            </nav>
        {% elif role == 'freelancer' %}
            <h1>{{ username }}的歷史承包紀錄</h1>
            <nav class="nav">
                <a href='/'>專案市場</a>
                <a href='/page/my-jobs'>我的承包</a>
                <a href='/page/history'>歷史承包紀錄</a>
                <a href='/logout'>登出</a>
            </nav>
        {% endif %}
        
        <p>您所有歷史專案 (包含您發案或接案的)。</p>

        <table>
            <thead>
                <tr>
                    <th>專案名稱</th>
                    <th>狀態</th>
                    <th>發布時間</th>
                    <th>截止時間</th>
                    <th></th>
                </tr>
            </thead>
            {% if not project %}
				<tr>
					<td>您目前沒有任何歷史專案。</td>
				</tr>

				{% else %}

					{% for item in project%}
				<tr>
                    {% if item.status == 'deleted' %}
                    <td><span style="text-decoration: line-through">{{item.title}}</span></td>
					<td><span style="text-decoration: line-through"><span class="status-pill link-{{item.status}}">{{item.status_text}}</span></span></td>
					<td><span style="text-decoration: line-through">{{item.create_time.strftime('%Y-%m-%d')}}</span></td>
					<td><span style="text-decoration: line-through">{{item.deadline_date.strftime('%Y-%m-%d') if item.deadline_date else 'N/A'}}</span></td>
					<td><a href='/page/check-restore/{{item.id}}' class="btn btn-primary" style="padding: 5px 10px;">復原</a></td>
                    {%else%}
					<td><a href="/page/read/{{item.id}}">{{item.title}}</a></td>
					<td><span class="status-pill link-{{item.status}}">{{item.status_text}}</span></td>

					<td>{{item.create_time.strftime('%Y-%m-%d')}}</td>
					<td>{{item.deadline_date.strftime('%Y-%m-%d') if item.deadline_date else 'N/A'}}</td>
                    <td></td>
                    {%endif%}
				</tr>
					{%endfor%}
				{%endif%}
        </table>
    </div>
</body>
</html>
