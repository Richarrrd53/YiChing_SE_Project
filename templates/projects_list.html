<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>工作委託平台</title>
    <link rel="stylesheet" href="/css/style.css"> <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
		<h3>登入身分：{{ username }} <span class="status-pill role-{{role}}">{{role}}</span></h3>
        {% if role == 'client' %}
            <h1>{{ username }}的委託專案</h1>
            <nav class="nav">
                <a href='/'>我的專案</a>
                <a href='/page/create-project'>新增委託</a>
                <a href='/page/history'>歷史委託紀錄</a>
                <a href='/logout'>登出</a>
            </nav>
            <table>
                <thead>
                    <tr>
                        <th>專案名稱</th>
                        <th>狀態</th>
                        <th>預算</th>
                        <th>截止日期</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    {% if not items %}
                    <tr>
                        <td colspan="5" style="text-align: center;">您目前沒有任何專案。 <a href="/page/create-project">立即建立一個！</a></td>
                    </tr>
                    {% else %}
                    {% for item in items%}
                    <tr>
                        <td><a href="/page/read/{{item.id}}">{{item.title}}</a></td>
                        <td><span class="status-pill link-{{item.status}}">{{item.status_text}}</span></td>
                        <td>${{item.budget}}</td>
                        <td>{{item.deadline_date.strftime('%Y-%m-%d') if item.deadline_date else 'N/A'}}</td>
                        <td>
                            {% if item.status != 'completed' and item.status != 'cancelled' %}
                            <a href='/page/check-delete/{{item.id}}' class="btn btn-danger" style="padding: 5px 10px;">刪除</a>
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                    {% endif %}
                </tbody>
            </table>

        {% elif role == 'freelancer' %}
            <h1>專案市場 (開放中)</h1>
            <nav class="nav">
                <a href='/'>專案市場</a>
                <a href='/page/my-jobs'>我的承包</a>
                <a href='/page/history'>歷史承包紀錄</a>
                <a href='/logout'>登出</a>
            </nav>
            <table>
                <thead>
                    <tr>
                        <th>專案名稱</th>
                        <th>委託人</th>
                        <th>預算</th>
                        <th>截止日期</th>
                    </tr>
                </thead>
                <tbody>
                    {% if not items%}
                    <tr>
                        <td colspan="4" style="text-align: center;">目前沒有任何公開的委託專案。</td>
                    </tr>
                    {% else %}
                    {% for item in items%}
                    <tr>
                        <td><a href="/page/read/{{item.id}}">{{item.title}}</a></td>
                        <td>{{item.client_username}}</td>
                        <td>${{item.budget}}</td>
                        <td>{{item.deadline_date.strftime('%Y-%m-%d') if item.deadline_date else 'N/A'}}</td>
                    </tr>
                    {% endfor %}
                    {% endif %}
                </tbody>
            </table>
        {% endif %}
    </div>
</body>
</html>